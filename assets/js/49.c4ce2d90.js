(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{545:function(_,v,e){"use strict";e.r(v);var t=e(6),o=Object(t.a)({},(function(){var _=this,v=_.$createElement,e=_._self._c||v;return e("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[e("h2",{attrs:{id:"react理念"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#react理念"}},[_._v("#")]),_._v(" React理念")]),_._v(" "),e("p",[_._v("先来看看官网原话")]),_._v(" "),e("blockquote",[e("p",[_._v("React 是用 JavaScript 构建"),e("strong",[_._v("快速响应")]),_._v("的大型 Web 应用程序的首选方式。")])]),_._v(" "),e("p",[_._v("所以React中关键是实现"),e("code",[_._v("快速响应")]),_._v("。")]),_._v(" "),e("p",[_._v("我们日常使用App，浏览网页时，有两类场景会制约"),e("code",[_._v("快速响应")]),_._v("：")]),_._v(" "),e("ul",[e("li",[_._v("当遇到大计算量的操作或者设备性能不足使页面掉帧，导致卡顿。")]),_._v(" "),e("li",[_._v("发送网络请求后，由于需要等待数据返回才能进一步操作导致不能快速响应。")])]),_._v(" "),e("p",[_._v("概括的讲就是:")]),_._v(" "),e("ul",[e("li",[_._v("CPU的瓶颈")]),_._v(" "),e("li",[_._v("IO的瓶颈")])]),_._v(" "),e("h2",{attrs:{id:"cpu-和-io-的瓶颈"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cpu-和-io-的瓶颈"}},[_._v("#")]),_._v(" CPU 和 IO 的瓶颈")]),_._v(" "),e("p",[e("strong",[_._v("CPU")])]),_._v(" "),e("p",[_._v("当项目变得庞大、组件数量繁多时，就容易遇到CPU的瓶颈。(Ex:ul>li*3000)")]),_._v(" "),e("p",[_._v("主流浏览器刷新频率为60Hz，即每（1000ms / 60Hz）16.6ms浏览器刷新一次。")]),_._v(" "),e("p",[_._v("我们知道，JS可以操作DOM，"),e("code",[_._v("GUI渲染线程")]),_._v("与"),e("code",[_._v("JS线程")]),_._v("是互斥的。所以"),e("strong",[_._v("JS脚本执行")]),_._v("和"),e("strong",[_._v("浏览器布局、绘制")]),_._v("不能同时执行。")]),_._v(" "),e("p",[_._v("在每16.6ms时间内，需要完成如下工作：\\")]),_._v(" "),e("p",[e("code",[_._v("JS脚本执行 ----- 样式布局 ----- 样式绘制")])]),_._v(" "),e("p",[_._v("当JS执行时间过长，超出了16.6ms，这次刷新就没有时间执行"),e("strong",[_._v("样式布局")]),_._v("和"),e("strong",[_._v("样式绘制")]),_._v("了。")]),_._v(" "),e("p",[_._v("JS脚本执行时间过长，页面掉帧，造成卡顿。")]),_._v(" "),e("p",[e("strong",[_._v("React的解决方案")])]),_._v(" "),e("p",[_._v("在浏览器每一帧的时间中，预留一些时间给JS线程，"),e("code",[_._v("React")]),_._v("利用这部分时间更新组件（可以看到，在"),e("a",{attrs:{href:"https://github.com/facebook/react/blob/1fb18e22ae66fdb1dc127347e169e73948778e5a/packages/scheduler/src/forks/SchedulerHostConfig.default.js#L119",target:"_blank",rel:"noopener noreferrer"}},[_._v("源码 (opens new window)"),e("OutboundLink")],1),_._v("中，预留的初始时间是5ms）。")]),_._v(" "),e("p",[_._v("当预留的时间不够用时，"),e("code",[_._v("React")]),_._v("将线程控制权交还给浏览器使其有时间渲染UI，"),e("code",[_._v("React")]),_._v("则等待下一帧时间到来继续被中断的工作。")]),_._v(" "),e("blockquote",[e("p",[_._v("这种将长任务分拆到每一帧中，像蚂蚁搬家一样一次执行一小段任务的操作，被称为"),e("code",[_._v("时间切片")]),_._v("（time slice）")])]),_._v(" "),e("p",[e("strong",[_._v("IO")])]),_._v(" "),e("p",[e("code",[_._v("网络延迟")]),_._v("是前端开发者无法解决的。如何在"),e("code",[_._v("网络延迟")]),_._v("客观存在的情况下，减少用户对"),e("code",[_._v("网络延迟")]),_._v("的感知？")]),_._v(" "),e("p",[e("code",[_._v("React")]),_._v("给出的答案是"),e("a",{attrs:{href:"https://zh-hans.reactjs.org/docs/concurrent-mode-intro.html#putting-research-into-production",target:"_blank",rel:"noopener noreferrer"}},[_._v("将人机交互研究的结果整合到真实的 UI 中 (opens new window)"),e("OutboundLink")],1),_._v("。")])])}),[],!1,null,null,null);v.default=o.exports}}]);